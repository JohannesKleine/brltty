#!/bin/bash
. /brltty/current/libexec/canute-prologue.sh

showProgramUsagePurpose() {
cat <<END_OF_PROGRAM_USAGE_PURPOSE
Run a BrlAPI Java client within a prepared environment.
END_OF_PROGRAM_USAGE_PURPOSE
}

processExtraProgramParameters() {
   declare -g classArguments=("${@}")
}

addProgramParameter "class" className "the class (or jar) to run"
optionalProgramParameters "arg" "the arguments to pass to the class"
parseProgramArguments "${@}"
set -e

if [ -n "${DISPLAY}" ]
then
   session=1
else
   session=0
fi

export BRLAPI_HOST="localhost:${session}"
exec java --class-path "${apiLinksDirectory}/java/brlapi.jar"  "-Djava.library.path=${apiLinksDirectory}/jni" "${className}" "${classArguments[@]}"
exit "${?}"
